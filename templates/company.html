<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ company }} – Insights</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
    crossorigin="anonymous"
  />
</head>
<body class="bg-light">
  <div class="container py-4">
    <a href="{{ url_for('index') }}" class="btn btn-link mb-3">← Back to companies</a>
    <h1 class="mb-4">{{ company }}</h1>

    {% if stats %}
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card text-center">
            <div class="card-body">
              <h3 class="text-primary">{{ stats.total_entries }}</h3>
              <p class="text-muted mb-0">Stories Shared</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center">
            <div class="card-body">
              <h3 class="text-success">{{ stats.success_rate }}%</h3>
              <p class="text-muted mb-0">Success Rate</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center">
            <div class="card-body">
              <h3 class="text-info">{{ "${:,}".format(stats.avg_salary) if stats.avg_salary else "–" }}</h3>
              <p class="text-muted mb-0">Avg Salary</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center">
            <div class="card-body">
              <h3 class="text-warning">{{ stats.roles|length }}</h3>
              <p class="text-muted mb-0">Different Roles</p>
            </div>
          </div>
        </div>
      </div>

      {% if stats.roles %}
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">Available Roles</h5>
          <div class="d-flex flex-wrap gap-2">
            {% for role in stats.roles %}
              <span class="badge bg-light text-dark border">{{ role }}</span>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}
    {% endif %}

      <div class="row gy-4">
        {% for e in entries %}
          <div class="col-md-6">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title">{{ e.role }}</h5>
                <p class="card-text">
                  <span class="badge bg-{{ 'success' if e.outcome == 'Success' else 'danger' if e.outcome == 'Rejected' else 'warning' }}">
                    {{ e.outcome }}
                  </span><br>
                  <strong>Salary:</strong> {{ '$' + e.salary if e.salary else '–' }} |
                  <strong>Bonus:</strong> {{ '$' + e.bonus if e.bonus else '–' }}<br>
                  {% if e.university %}
                  <strong>University:</strong> {{ e.university }}
                  {% if e.wam %}(WAM: {{ e.wam }}){% endif %}<br>
                  {% endif %}
                </p>
                {% if e.application_stages %}
                <p class="card-text"><strong>Application:</strong> {{ e.application_stages }}</p>
                {% endif %}
                {% if e.interview_experience %}
                <p class="card-text"><strong>Interview:</strong> {{ e.interview_experience }}</p>
                {% endif %}
                {% if e.advice %}
                <p class="card-text"><em>{{ e.advice }}</em></p>
                {% endif %}
                <small class="text-muted">
                  Submitted: {{ e.timestamp.split('T')[0] }}
                </small>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-warning text-center">
        No entries for {{ company }} yet. Be the first to share your experience!
      </div>
    {% endif %}
  </div>
</body>
</html>